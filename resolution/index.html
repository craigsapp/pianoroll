---
layout: default
title: Resolution
---

<script>
// vim: ts=3

document.addEventListener("DOMContentLoaded", function() {
	var boxes = document.querySelectorAll(".imagelink");
	var matches;
	var content;
	var newcontent;
	var link;
	for (var i=0; i<boxes.length; i++) {
		content = boxes[i].outerHTML;
		matches = content.match(/>([^<]*)</);
		if (!matches) {
			continue;
		}
		var link = matches[1];
		content = content.replace(/>[^<]*</, "><");
		newcontent  = '<a target="_blank" href="/images/resolution/';
		newcontent += link + '.png">'
		newcontent += content;
		newcontent += '</a>';
		boxes[i].outerHTML = newcontent;
	}
});

</script>

<h1> Resolution Tests</h1>


<style>

table.image-table td {
	text-align: center;
	padding: 10px 40px;
}

div.imagelink {
	margin: 0;
}

.dpi150 {
	width: 15px;
	height: 15px;
}

.dpi300 {
	width: 30px;
	height: 30px;
}

.dpi600 {
	width: 45px;
	height: 45px;
}

.dpi1200 {
	width: 60px;
	height: 60px;
}

.bit24 {
  background: -webkit-linear-gradient(left top, red , green, blue);
  background: -o-linear-gradient(bottom right, red, green, blue);
  background: -moz-linear-gradient(bottom right, red, green, blue);
  background: linear-gradient(to bottom right, red , green, blue);
}

.bit8 {
  background: -webkit-linear-gradient(left top, black, white);
  background: -o-linear-gradient(bottom right, black, white);
  background: -moz-linear-gradient(bottom right, black, white);
  background: linear-gradient(to bottom right, black, white);
}

.bit2t20 {
  display: inline-block;
  background: -webkit-linear-gradient(left top, black 0%, black 33%, white 33%, white 100%);
  background: -o-linear-gradient(bottom right, black 0%, black 33%, white 33%, white 100%);
  background: -moz-linear-gradient(bottom right, black 0%, black 33%, white 33%, white 100%);
  background: linear-gradient(to bottom right, black 0%, black 33%, white 33%, white 100%);
  border: 1px solid #000;
}

.bit2t40 {
  display: inline-block;
  background: -webkit-linear-gradient(left top, black 0%, black 50%, white 50%, white 100%);
  background: -o-linear-gradient(bottom right, black 0%, black 50%, white 50%, white 100%);
  background: -moz-linear-gradient(bottom right, black 0%, black 50%, white 50%, white 100%);
  background: linear-gradient(to bottom right, black 0%, black 50%, white 50%, white 100%);
  border: 1px solid #000;
}

.bit2t60 {
  display: inline-block;
  background: -webkit-linear-gradient(left top, black 0%, black 66%, white 66%, white 100%);
  background: -o-linear-gradient(bottom right, black 0%, black 66%, white 66%, white 100%);
  background: -moz-linear-gradient(bottom right, black 0%, black 66%, white 66%, white 100%);
  background: linear-gradient(to bottom right, black 0%, black 66%, white 66%, white 100%);
  border: 1px solid #000;
}

</style>




<table class="image-table">

<tr><td></td>
    <td>24 bit</td>
    <td>8 bit</td>
    <td>2 bit</td>
</tr>

<tr>
    <td>150 dpi</td>
    <td> <div class="imagelink dpi150 bit24">150dpi-24bit</div> </td>
    <td> <div class="imagelink dpi150 bit8">150dpi-8bit</div> </td>
    <td> <div class="imagelink dpi150 bit2t20">150dpi-2bit-20t</div>&nbsp
         <div class="imagelink dpi150 bit2t40">150dpi-2bit-40t</div>&nbsp
         <div class="imagelink dpi150 bit2t60">150dpi-2bit-60t</div> </td>
</tr>

<tr>
    <td>300 dpi</td>
    <td> <div class="imagelink dpi300 bit24">300dpi-24bit</div> </td>
    <td> <div class="imagelink dpi300 bit8">300dpi-8bit</div> </td>
    <td> <div class="imagelink dpi300 bit2t20">300dpi-2bit-20t</div>&nbsp;
         <div class="imagelink dpi300 bit2t40">300dpi-2bit-40t</div>&nbsp;
         <div class="imagelink dpi300 bit2t60">300dpi-2bit-60t</div> </td>
</tr>

<tr>
    <td>600 dpi</td>
    <td> <div class="imagelink dpi600 bit24">600dpi-24bit</div> </td>
    <td> <div class="imagelink dpi600 bit8">600dpi-8bit</div> </td>
    <td> <div class="imagelink dpi600 bit2t20">600dpi-2bit-20t</div>&nbsp;
         <div class="imagelink dpi600 bit2t40">600dpi-2bit-40t</div>&nbsp;
         <div class="imagelink dpi600 bit2t60">600dpi-2bit-60t</div> </td>
</tr>

<tr>
    <td>1200 dpi</td>
    <td> </td>
    <td> </td>
    <td> <div class="imagelink dpi1200 bit2t20">1200dpi-2bit-20t</div>&nbsp;
         <div class="imagelink dpi1200 bit2t40">1200dpi-2bit-40t</div>&nbsp;
         <div class="imagelink dpi1200 bit2t60">1200dpi-2bit-60t</div> </td>
</tr>

</table>


<style>
table.color-hist {
	width:800;
}
table.color-hist td {
	background-repeat: no-repeat;
	background-size: 100%;
	width:220px;
	height:350px;
}
</style>

<table class="color-hist">
<tr>
<td style="background-image: url('/images/resolution/histogram-color.png');"></td>
<td style="background-image: url('/images/resolution/histogram-red.png');"></td>
<td style="background-image: url('/images/resolution/histogram-green.png');"></td>
<td style="background-image: url('/images/resolution/histogram-blue.png');"></td>
</tr>
</table>




<h2> Ground truth </h2>

Below is a hand-made vector graphics version of the 1200 dpi 2-bit
scan (threshold at 40) which can be overlay the above images.  Each
of the 40 punches are numbered.  The radius of hole #22 was measured
to be 0.830 mm, which is a diameter of 9.8 pixels at 150 dpi, 19.6
pixels at 300 dpi, 39.2 pixels at 600 dpi, and 78.4 pixels at 1200
dpi.  
<br> <br>

<table><tr><td>

<label>Bit Depth</label>
<select id="depth" class="form-control">
   <option>24</option>
   <option>8</option>
   <option>2</option>
   <option>none</option>
</select>
</td><td>

<label>DPI</label>
<select id="dpi" class="form-control">
   <option>600</option>
   <option>300</option>
   <option>150</option>
   <option>none</option>
   <option>1200</option>
</select>
</td><td>

<label>Threshold</label>
<select id="threshold" class="form-control">
   <option>N/A</option>
   <option>20</option>
   <option>40</option>
   <option>60</option>
</select>
</td><td>

<span style="font-size:16px;">Zoom:</span>
<input 
	type="text" 
	id="foo2" 
	class="span2" 
	value="" 
	data-slider-min="500" 
	data-slider-max="8000" 
	data-slider-step="10" 
	data-slider-value="800" 
	data-slider-orientation="horizontal" 
	data-slider-selection="after"
	data-slider-tooltip="hide">
</td><td>

<span style="font-size:16px;">Overlay opacity:</span>
<input 
	type="text" 
	id="foo" 
	class="span2" 
	value="" 
	data-slider-min="0" 
	data-slider-max="1" 
	data-slider-step="0.1" 
	data-slider-value="0.7" 
	data-slider-orientation="horizontal" 
	data-slider-selection="after"
	data-slider-tooltip="hide">

</td></tr></table>

<script>

$(window).load(function(){
	$('#foo').slider()
  		.on('slide', function(ev){
     		$('#bar').val(ev.value);
			var overlay = document.querySelector("#overlay");
			overlay.style.opacity = ev.value;
  		});
	}); 

$(window).load(function(){
	$('#foo2').slider()
  		.on('slide', function(ev){
     		$('#bar').val(ev.value);
			var gt = document.querySelector("#ground-truth");
			gt.style['background-size'] = ev.value + 'px';
			var overlay = document.querySelector("#overlay");
			overlay.style['width'] = ev.value + 'px';
			overlay.style['height'] = (ev.value * 0.97635727) + 'px';
  		});
	}); 

</script>
</script>

<script>

$('#dpi').change(changeBackground);
$('#threshold').change(changeBackground);
$('#depth').change(changeBackground);

function changeBackground() {
	var dpi       = document.querySelector("#dpi");
	var depth     = document.querySelector("#depth");
	var threshold = document.querySelector("#threshold");
	var gt        = document.querySelector("#ground-truth");

	if (!dpi.value) {
		gt.style['background-image'] = 'none';
      console.log("NO DPI", dpi.value, "DEPTH", depth.value);
		return;
	}

	if (!depth.value) {
		gt.style['background-image'] = 'none';
      console.log("NO DEPTH", depth.value, "DPI", dpi.value);
		return;
	}

   console.log("displaying");

	if (dpi.value == "1200") {
		depth.value = "2";
	}

	if (depth.value == "2") {
		if (!threshold.value) {
			threshold.value = "40";
		}
		if (threshold.value == 'N/A') {
			threshold.value = "40";
		}
	} else {
		threshold.value = "N/A";
	}

	var image = '/images/resolution/';
	image += dpi.value + 'dpi';
	image += '-' + depth.value + 'bit';
	if ((threshold.value !== 'N/A') && (threshold.value !== "")) {
		image += '-' + threshold.value + 't';
	}
	image += '.png';
	gt.style['background-image'] = 'url("' + image + '")';
	console.log("image", image);

}

</script>

<style>
#ground-truth {
	background-size: 800px;
	background-repeat: no-repeat;
	background-origin: content-box;
	background-attachment: local;
	background-image: url('/images/resolution/600dpi-24bit.png');
}

</style>
<div style="overflow: scroll; width:800px; height:781px;" id="ground-truth">{% include resolution/ground-truth.svg %}</div>


<h3> Coordinates of punches </h3>

<style>
table.coord * {
	font-size:97%;
}

table.coord td:nth-child(1) {
	background-color: #d00;
	text-align: center;
	color: #fff;
	font-weight: 
}

table.coord td:nth-child(2) {
	margin-right:0;
	padding-right:0;
}

table.coord td:nth-child(3) {
	margin-left:0;
	padding-left:3px;
}

table.coord td:nth-child(2):before { content: '('; }
table.coord td:nth-child(2):after { content: ','; }
table.coord td:nth-child(3):after { content: ')'; }

table.meta-coord > tbody > tr > td {
}
</style>

The following table gives the coordinates of the centers of each punch 
in the example image, based on the hand-aligned SVG image.  The units are
in millimeters with the origin at the top left corner of the image.
For example, the first point is 38.486 mm from the left margin, and 2.943 mm
from the top margin.

<br><br>

<table class="meta-coord" padding=0 cellspacing=0>
<tr><td>
<table class="coord">
<tr><td>1</td>	<td>38.486</td>	<td>2.943</td></tr>
<tr><td>2</td>	<td>39.798</td>	<td>2.943</td></tr>
<tr><td>3</td>	<td>&nbsp;&nbsp;9.911</td>	<td>8.404</td></tr>
<tr><td>4</td>	<td>11.138</td>	<td>8.404</td></tr>
<tr><td>5</td>	<td>12.366</td>	<td>8.404</td></tr>
<tr><td>6</td>	<td>13.509</td>	<td>8.404</td></tr>
<tr><td>7</td>	<td>14.694</td>	<td>8.404</td></tr>
<tr><td>8</td>	<td>15.922</td>	<td>8.404</td></tr>
<tr><td>9</td>	<td>17.107</td>	<td>8.404</td></tr>
<tr><td>10</td>	<td>18.377</td>	<td>8.404</td></tr>
</table>

</td><td>
<table class="coord">
<tr><td>11</td>	<td>25.320</td>	<td>&nbsp;&nbsp;8.447</td></tr>
<tr><td>12</td>	<td>26.505</td>	<td>&nbsp;&nbsp;8.447</td></tr>
<tr><td>13</td>	<td>27.860</td>	<td>&nbsp;&nbsp;8.447</td></tr>
<tr><td>14</td>	<td>29.088</td>	<td>&nbsp;&nbsp;8.447</td></tr>
<tr><td>15</td>	<td>30.231</td>	<td>&nbsp;&nbsp;8.489</td></tr>
<tr><td>16</td>	<td>&nbsp;&nbsp;3.899</td>	<td>11.198</td></tr>
<tr><td>17</td>	<td>&nbsp;&nbsp;5.169</td>	<td>11.198</td></tr>
<tr><td>18</td>	<td>&nbsp;&nbsp;3.857</td>	<td>22.459</td></tr>
<tr><td>19</td>	<td>&nbsp;&nbsp;5.085</td>	<td>22.459</td></tr>
<tr><td>20</td>	<td>15.837</td>	<td>22.501</td></tr>
</table>

</td><td>
<table class="coord">
<tr><td>21</td>	<td>17.065</td>	<td>22.501</td></tr>
<tr><td>22</td>	<td>29.045</td>	<td>22.544</td></tr>
<tr><td>23</td>	<td>44.116</td>	<td>22.628</td></tr>
<tr><td>24</td>	<td>45.174</td>	<td>22.586</td></tr>
<tr><td>25</td>	<td>&nbsp;&nbsp;9.826</td>	<td>30.883</td></tr>
<tr><td>26</td>	<td>11.096</td>	<td>30.883</td></tr>
<tr><td>27</td>	<td>21.722</td>	<td>30.883</td></tr>
<tr><td>28</td>	<td>22.907</td>	<td>30.883</td></tr>
<tr><td>29</td>	<td>33.575</td>	<td>30.968</td></tr>
<tr><td>30</td>	<td>34.803</td>	<td>30.968</td></tr>
</table>

</td><td>
<table class="coord">
<tr><td>31</td>	<td>38.316</td>	<td>36.514</td></tr>
<tr><td>32</td>	<td>39.586</td>	<td>36.514</td></tr>
<tr><td>33</td>	<td>12.197</td>	<td>42.059</td></tr>
<tr><td>34</td>	<td>13.467</td>	<td>42.059</td></tr>
<tr><td>35</td>	<td>14.652</td>	<td>42.059</td></tr>
<tr><td>36</td>	<td>15.795</td>	<td>42.059</td></tr>
<tr><td>37</td>	<td>16.980</td>	<td>42.059</td></tr>
<tr><td>38</td>	<td>18.250</td>	<td>42.059</td></tr>
<tr><td>39</td>	<td>28.918</td>	<td>42.144</td></tr>
<tr><td>40</td>	<td>30.104</td>	<td>42.144</td></tr>
</table>

</td></tr>
</table>










